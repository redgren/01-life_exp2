runApp('testt.R')
runApp('testt.R')
input$file
dlist$1
dlist
dlist
i
runApp('testt.R')
runApp('testt.R')
View(dlist)
dlist[[1]] <- read_csv(input$file1[[1, 'datapath']])
runApp('testt.R')
View(dlist)
n_files
dlist
dlist
input$file[[1.'datapath']]
runApp('testt.R')
input$file
input$file[[1,"datapath"]]
input$file[[3,"datapath"]]
head(read_csv(input$file[[3,"datapath"]]))
tt <- vector("list",3)[[1]] <- head(read_csv(input$file[[3,"datapath"]]))
dlist
library(shiny)
dlist
dlist
runApp('testt.R')
dlist
runApp('testt.R')
dlist
test;ist <- vector("list",3)
tlist <- vector("list",3)
tlist
tlist[1] <- read_csv("./data/estate.csv")
tlist
tlist[[1]] <- read_csv("./data/estate.csv")
tlist
runApp('testt.R')
n_files
ddlist
dlist[[1]]
i
i
tlist
tlist[[2]] <- tlist[[1]]
tlist[[3]] <- tlist[[1]]
View(tlist)
library(tidyverse)
mapp(tlist, nrow())
map(tlist, nrow)
rbind(map(tlist, nrow))
str(rbind(map(tlist, nrow)))
str(rowbind(map(tlist, nrow)))
str(rowbind(map_df(tlist, nrow)))
str(rbind(map_df(tlist, nrow)))
str(rbind(map(tlist, nrow)))
str(flatten(map(tlist, nrow)))
str(bind_rows(map(tlist, nrow)))
bind_rows(map(tlist, nrow))
map(tlist, nrow)
bind_rows(map(tlist, nrow))
str(summary(tlist[[1]]))
bind_rows(map(tlist, summary))
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
dlist
i
runApp('testt.R')
i
runApp('testt.R')
input$file
i
dlist
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
n
runApp('testt.R')
input$file
dlist
df
df()
summ ary(df())
runApp('testt.R')
runApp('testt.R')
n
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
i
i
n_files
dlist
df
df()
input$file
runApp('testt.R')
runApp('testt.R')
dlist
dlist()
runApp('testt.R')
df
df()
n
runApp('testt.R')
N
runApp('testt.R')
n
q
รง
runApp('testt.R')
dlist
i
dlist
runApp('testt.R')
runApp('testt.R')
dlist
dlist
i
dlist
n
n
i
)
}
runApp('testt.R')
dlist
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
dlist
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
df
()
summary(tlist)
summary(bind_rows(tlist))
str(summary(bind_rows(tlist)))
runApp('testt.R')
dlist
runApp('testt.R')
head(df)
runApp('testt.R')
head(df())
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
getOption("width")
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
library(readr)
library(dplyr)
# only set up for the demo files based on variables in the plot.
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file", "What file(s)?",
accept = "text/csv", multiple = TRUE),
checkboxInput("logdata", "Log Data?")
), # sidebarPanel
mainPanel(
plotOutput("boxp"),
verbatimTextOutput("summ")
) # mainPanel
) #sidebarLayout
) #fluidPage
server <- function(input, output, session) {
df <- reactive({
req(input$file)
n_files <- nrow(input$file)
dlist <- vector("list", length = n_files)
for (i in seq(1:n_files)){
dlist[[i]] <- read_csv(input$file[[i, "datapath"]])
}
df<- bind_rows(dlist)
})
output$summ <- renderPrint({
summary(df())
})
output$boxp <- renderPlot({
p <- ggplot(df(),aes(x=df()$charter, y = df()$consolidated_assets)) +
geom_boxplot()
if (input$logdata){
p <- p + scale_y_log10()
}
p
}) #renderPLot
}
shinyApp(ui, server)
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('testt.R')
runApp('test_app')
runApp()
runApp('07d2_upload_demo_multiple')
knitr::opts_chunk$set(echo = TRUE)
df <- read_csv("./BPD_Part_1_Victim_Based_Crime_Data.csv")
nrow(crime)
nrow(df)
file.info(df)
file.info("./BPD_Part_1_Victim_Based_Crime_Data.csv")
setwd("~/OneDrive - american.edu/Courses/Data_Sets")
file.info("./BPD_Part_1_Victim_Based_Crime_Data.csv")
file_name <- "./BPD_Part_1_Victim_Based_Crime_Data.csv"
df <- read_csv(file_name)
file_name <- "./BPD_Part_1_Victim_Based_Crime_Data.csv"
file_info <- file.info(file_name)
df <- read_csv(file_name)
file_name <- "./BPD_Part_1_Victim_Based_Crime_Data.csv"
file_info <- file.info(file_name)
df <- read_csv(file_name)
file_rows <- nrow(df)
max_rows <- floor(file_rows/(10 * 1024^2))
file_rows <- nrow(df)
max_rows <- floor(file_info$size/(10 * 1024^2))
file_rows <- nrow(df)
max_rows <- ceiling(file_info$size/(10 * 1024^2))
file_rows <- nrow(df)
max_rows <- file_rows/ceiling(file_info$size/(10 * 1024^2))
file_rows <- nrow(df)
max_rows <- floor(file_rows/ceiling(file_info$size/(10 * 1024^2)))
file_rows <- nrow(df)
min_subfiles <- ceiling(file_info$size/(10 * 1024^2))
max_rows <- floor(file_rows/min_subfiles)
library(rvest)
library(tidyverse)
library(stringr)
file_namet <- "./BPD_Part_1_Victim_Based_Crime_Data.csv"
string_extract(file_namet, ".+\\.csv$")
library(stringr)
string_extract(file_namet, ".+\\.csv$")
str_extract(file_namet, ".+\\.csv$")
str_extract(file_namet, ".+[^\\.csv$]"")
""
str_extract(file_namet, ".+[^\\.csv$])
""
""
str_extract(file_namet, ".+[^\\.csv$]")
for (i in seq(1:min_subfiles)){
if(i<min_subfiles){
df_sub <- df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv"
write_csv(df_sub,fname_sub)
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[[(i-1)*max_rows:file_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
browser()
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[[(i-1)*max_rows:file_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[[(i-1)*max_rows:file_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
i
max_rows
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[[(i-1)*max_rows:file_rows,]]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
str(df)
file_rows
max_rows
i
(i-1)$max_rows
(i-1)*max_rows
head(df[[(i-1)*max_rows:(i-1)*max_rows+max_rows,]])
head(df[(i-1)*max_rows:(i-1)*max_rows+max_rows,])
head(df[(i-1)*max_rows:(i-1)*max_rows+max_rows,])
str(df[(i-1)*max_rows:(i-1)*max_rows+max_rows,])
q
n
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[(i-1)*max_rows:(i-1)*max_rows+max_rows,]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[(i-1)*max_rows:file_rows,]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
n
n
n
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[(i-1)*max_rows:(i-1)*max_rows+max_rows,]
fname_sub <- str_c(string_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[(i-1)*max_rows:file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[(i-1)*max_rows:(i-1)*max_rows+max_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[(i-1)*max_rows:file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
browser()
df_sub <- df[(i-1)*max_rows:(i-1)*max_rows+1+max_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[(i-1)*max_rows+1:file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
file_name <- "./BPD_crime_files/BPD_Part_1_Victim_Based_Crime_Data.csv"
file_info <- file.info(file_name)
df <- read_csv(file_name)
file_name <- "./BPD_crime_files/BPD_Part_1_Victim_Based_Crime_Data.csv"
file_info <- file.info(file_name)
df <- read_csv(file_name)
file_rows <- nrow(df)
min_subfiles <- ceiling(file_info$size/(10 * 1024^2))
max_rows <- floor(file_rows/min_subfiles)
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[(i-1)*max_rows:(i-1)*max_rows+1+max_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[(i-1)*max_rows+1:file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
}
}
nrow(df)
str(df[(2-1)*max_rows:(2-1)*max_rows+1+max_rows,])
str(df[(2-1)*max_rows:(2-1)*max_rows+1+max_rows,])
df[12:15,]
df[4000:4000+1,]
df[4000:(4000+1),]
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[((i-1)*max_rps+1):((i-1)*max_rps+1+max_rows),]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[((i-1)*max_rps+1):file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} # end else
} # end for loop
file_rows <- nrow(df)
min_subfiles <- ceiling(file_info$size/(10 * 1024^2))
max_rps <- floor(file_rows/min_subfiles)
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[((i-1)*max_rps+1):((i-1)*max_rps+1+max_rows),]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[((i-1)*max_rps+1):file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} # end else
} # end for loop
runApp('~/OneDrive - american.edu/Courses/STAT-413-613/Lectures_All/07_08_shiny/07d2_upload_demo_multiple')
file_rows
max_rps
5*max_rps
5*max_rps-file_rows
file_rows <- nrow(df)
min_subfiles <- ceiling(file_info$size/(10 * 1024^2))
max_rps <- floor(file_rows/min_subfiles)
min_subfiles
min_subfiles*max_rps
file_rows <- nrow(df)
min_subfiles <- ceiling(file_info$size/(10 * 1024^2))
max_rps <- ceiling(file_rows/min_subfiles)
for (i in seq(1:min_subfiles)){
if(i < min_subfiles){
df_sub <- df[((i-1)*max_rps+1):((i-1)*max_rps+1+max_rows),]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} else{
df_sub <- df[((i-1)*max_rps+1):file_rows,]
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
write_csv(df_sub,fname_sub)
} # end else
} # end for loop
for (i in seq(1:min_subfiles)){
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
df2 <- row_bind(df2,read_csv(df_sub,fname_sub))
} # end for loop
for (i in seq(1:min_subfiles)){
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
df2 <- bind_row(df2,read_csv(df_sub,fname_sub))
} # end for loop
for (i in seq(1:min_subfiles)){
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
df2 <- bind_rows(df2,read_csv(df_sub,fname_sub))
} # end for loop
df2 <- df[1,]
for (i in seq(1:min_subfiles)){
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
df2 <- bind_rows(df2,read_csv(df_sub,fname_sub))
} # end for loop
df2 <- df[1,]
for (i in seq(1:min_subfiles)){
fname_sub <- str_c(str_extract(file_name, ".+[^\\.csv$]"),
as.character(i),".csv", collapse = "")
df2 <- bind_rows(df2,read_csv(fname_sub))
} # end for loop
df2 <- df2[-1,]
nrow(df2)
nrow(df)
sum(df == df2)
sum(df2 == df, na.rm = TRUE)
nrow(df2) * ncol(df2)
tail(df2)
tail(df)
all(df2 ==df)
all(df2 ==df, na.rm = TRUE)
setwd("~/OneDrive - american.edu/Courses/STAT-413-613/Lectures_All/07_08_shiny/07e_upload_demo")
